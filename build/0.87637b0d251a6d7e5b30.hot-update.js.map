{"version":3,"file":"0.87637b0d251a6d7e5b30.hot-update.js","sources":["webpack:///src/index.js"],"sourcesContent":["import app from './server';\nimport http from 'http';\nimport initSocket from './server/socket';\nconst server = http.createServer(app);\n\nlet io = initSocket(server);\n\n/* eslint-enable */\nlet currentApp = app;\n\nserver.listen(process.env.PORT || 3000, error => {\n  if (error) {\n    console.log(error);\n  }\n\n  console.log('🚀 started');\n});\n\nif (module.hot) {\n  console.log('✅  Server-side HMR Enabled!');\n\n  module.hot.accept('./server.js', () => {\n    console.log('🔁  HMR Reloading `./server`...');\n    server.close(function () {\n      console.log('关闭这个');\n    });\n    io.close();\n    // server.removeAllListeners();\n    const newApp = require('./server').default;\n    const newServer = http.createServer(newApp);\n    io = initSocket(newServer);\n    newServer.listen(3000, err => {\n      console.log('重连');\n    });\n    currentApp = newApp;\n    console.log('5555');\n  });\n\n  module.hot.accept('./server/socket/index', () => {\n    console.log('server socket reload');\n    server.close();\n    require('./server/socket').default(server);\n    server.listen(3000, error => {\n      console.log('更新了socket');\n    }) \n  })\n}\n\nexport default server;\n\n\n// WEBPACK FOOTER //\n// src/index.js"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}